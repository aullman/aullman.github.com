<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<title>Opentok - Demo</title>
		<script src="http://static.opentok.com/v0.92-alpha/js/TB.min.js" type="text/javascript"></script>
		<link rel="stylesheet" href="css/slide.css" type="text/css" media="screen" title="no title" charset="utf-8">
		<script type="text/javascript" charset="utf-8">
			var apiKey = "1974561";
			var sessionId = "2_MX4xOTc0NTYxfn5Nb24gU2VwIDE3IDIzOjM0OjA2IFBEVCAyMDEyfjAuMTg4NjIzOX4";
			var token = "T1==cGFydG5lcl9pZD0xOTc0NTYxJnNpZz1iZDQ3Zjk3ZjU2YWZlZjc4NTFhYzE0ZjFhNjQ1ZmM4NDYzNjU1N2I0OnNlc3Npb25faWQ9Ml9NWDR4T1RjME5UWXhmbjVOYjI0Z1UyVndJREUzSURJek9qTTBPakEySUZCRVZDQXlNREV5ZmpBdU1UZzROakl6T1g0JmNyZWF0ZV90aW1lPTEzNDc5NTAxMjkmZXhwaXJlX3RpbWU9MTM1MDU0MjEyOSZyb2xlPXB1Ymxpc2hlciZjb25uZWN0aW9uX2RhdGE9QWRhbSZub25jZT0zMTA5ODY=";
			
			
			var session = TB.initSession(sessionId);
			
			session.on({
				sessionConnected: function(event){
					// This will fire when I am connected
					// event.streams - Array of all the streams in the session now
					// event.connections - Array of all the connections
					
					subscribeToStreams(event.streams);
					session.publish();
				},
				streamCreated: function(event){
					// event.streams - Array of streams that were just created
					subscribeToStreams(event.streams);
				}
			});
			
			function subscribeToStreams(streams) {
				for (var i=0; i < streams.length; i++) {
					var stream = streams[i];
					if (stream.connection.connectionId != session.connection.connectionId) {
						session.subscribe(stream);
					}
				};
			}
			
			
			
			session.connect(apiKey, token);
			
			
		</script>
	</head>
	<body>
		<h1>OpenTok - Demo</h1>
	</body>
</html>